generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Locations (3 สาขา)
model Location {
  id              String   @id @default(cuid())
  slug            String   @unique // "chinatown", "yaowarat", "103-nana"
  name            String   // "Chinatown", "Yaowarat", "103 NANA"
  nameThai        String?  // ชื่อภาษาไทย
  tagline         String?  // "The Authentic Hideaway"
  description     String?
  address         String
  addressThai     String?
  latitude        Float
  longitude       Float
  wifiName        String
  wifiPassword    String
  checkInTime     String   @default("14:00")
  checkOutTime    String   @default("12:00")
  emergencyPhone  String
  breakfastInfo   String?
  houseRules      String?
  spotifyPlaylist String?
  imageUrl        String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  places          Place[]
  faqs            FAQ[]
  events          Event[]
}

// Places (ร้านอาหาร, คาเฟ่, สถานที่)
model Place {
  id             String    @id @default(cuid())
  name           String
  nameThai       String?
  description    String
  descriptionThai String?
  address        String
  latitude       Float
  longitude      Float
  category       Category
  subcategory    String?   // "rooftop_bar", "hidden_bar", "craft_beer", "instagram_spot", etc.
  timeOfDay      TimeOfDay
  tags           String[]
  priceRange     Int       @default(1) // 1-4 ($ - $$$$)
  mustTry        String?   // เมนูแนะนำ
  tips           String?   // เคล็ดลับ
  imageUrl       String?
  googleMapsUrl  String?
  isHostelChoice Boolean   @default(false)
  isActive       Boolean   @default(true)
  locationId     String
  location       Location  @relation(fields: [locationId], references: [id], onDelete: Cascade)
  dailyPicks     DailyPick[]
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

enum Category {
  CAFE
  STREET_FOOD
  RESTAURANT
  BAR
  CULTURAL
  MARKET
  TRANSPORT
}

enum TimeOfDay {
  MORNING
  DAY
  NIGHT
  ANYTIME
}

// FAQ for Chatbot
model FAQ {
  id         String    @id @default(cuid())
  question   String
  answer     String
  category   String    // "wifi", "food", "transport", "general"
  locationId String?
  location   Location? @relation(fields: [locationId], references: [id], onDelete: Cascade)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
}

// Thai Phrases
model ThaiPhrase {
  id            String   @id @default(cuid())
  english       String
  thai          String
  pronunciation String
  category      String   // "greeting", "food", "numbers", "emergency"
  createdAt     DateTime @default(now())
}

// Admin User
model User {
  id        String   @id @default(cuid())
  username  String   @unique
  password  String
  name      String
  role      Role     @default(ADMIN)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Role {
  ADMIN
  SUPER_ADMIN
}

// Events Calendar (กิจกรรมในโฮสเทล)
model Event {
  id          String    @id @default(cuid())
  title       String
  description String?
  date        DateTime
  time        String?   // "19:00"
  endTime     String?   // "22:00"
  locationId  String?
  location    Location? @relation(fields: [locationId], references: [id], onDelete: Cascade)
  imageUrl    String?
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

// Today's Pick (ไฮไลท์ประจำวัน)
model DailyPick {
  id          String   @id @default(cuid())
  title       String   // "คืนนี้มีตลาดกลางคืน!"
  description String?
  placeId     String?
  place       Place?   @relation(fields: [placeId], references: [id], onDelete: SetNull)
  date        DateTime @default(now())
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Guestbook (สมุดเยี่ยม)
model GuestbookEntry {
  id         String   @id @default(cuid())
  name       String
  country    String?
  message    String
  rating     Int?     // 1-5 stars
  isApproved Boolean  @default(false)
  createdAt  DateTime @default(now())
}
